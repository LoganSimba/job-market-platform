<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Job Market Intelligence Platform</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    :root {
      --primary: #667eea;
      --secondary: #764ba2;
      --text-light: #fff;
      --text-dark: #333;
      --bg-glass: rgba(255, 255, 255, 0.15);
      --card-bg: rgba(255, 255, 255, 0.95);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', sans-serif;
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      min-height: 100vh;
      color: var(--text-dark);
    }

    .navbar {
      backdrop-filter: blur(20px);
      background-color: var(--bg-glass);
      border-bottom: 1px solid rgba(255, 255, 255, 0.2);
      padding: 1rem 2rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      position: sticky;
      top: 0;
      z-index: 1000;
    }

    .logo {
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--text-light);
    }

    .nav-links a {
      margin-left: 1.5rem;
      color: var(--text-light);
      text-decoration: none;
      font-weight: 500;
      transition: 0.3s;
    }

    .nav-links a:hover {
      text-decoration: underline;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 2rem;
    }

    .hero {
      text-align: center;
      margin-bottom: 2rem;
      color: var(--text-light);
    }

    .hero h1 {
      font-size: 2.8rem;
      background: linear-gradient(45deg, #fff, #a8edea);
      background-clip: text;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      margin-bottom: 0.5rem;
    }

    .hero p {
      font-size: 1.2rem;
      opacity: 0.9;
    }

    .story-section {
      background: var(--bg-glass);
      backdrop-filter: blur(15px);
      border-radius: 16px;
      padding: 2rem;
      margin-bottom: 2rem;
      color: var(--text-light);
      text-align: center;
    }

    .story-section h2 {
      font-size: 1.8rem;
      font-weight: 700;
      margin-bottom: 1rem;
      color: var(--text-light);
    }

    .story-section p {
      font-size: 1.1rem;
      line-height: 1.6;
      opacity: 0.95;
      margin-bottom: 1rem;
    }

    .tech-badges {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 0.5rem;
      margin-top: 1rem;
    }

    .tech-badge {
      background: rgba(255, 255, 255, 0.2);
      color: var(--text-light);
      padding: 0.4rem 0.8rem;
      border-radius: 20px;
      font-size: 0.85rem;
      font-weight: 600;
    }

    .stats-grid, .charts-grid {
      display: grid;
      gap: 1.5rem;
      margin-bottom: 2rem;
    }

    .stats-grid {
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    }

    .charts-grid {
      grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
    }

    .stat-card {
      background: var(--bg-glass);
      backdrop-filter: blur(15px);
      padding: 1.5rem;
      border-radius: 16px;
      text-align: center;
      color: var(--text-light);
      transition: transform 0.3s ease;
    }

    .stat-card:hover {
      transform: translateY(-4px);
    }

    .stat-value {
      font-size: 2rem;
      font-weight: 800;
      margin-bottom: 0.25rem;
    }

    .stat-label {
      font-size: 0.9rem;
      opacity: 0.9;
    }

    .chart-container, .skills-grid {
      background: var(--card-bg);
      border-radius: 16px;
      padding: 1.5rem;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
      backdrop-filter: blur(10px);
      transition: transform 0.3s ease;
    }

    .chart-container:hover, .skills-grid:hover {
      transform: translateY(-2px);
    }

    .chart-title {
      font-size: 1.2rem;
      font-weight: 700;
      margin-bottom: 1rem;
      color: var(--text-dark);
    }

    .chart-wrapper {
      height: 300px;
      position: relative;
    }

    .skills-list {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: 1rem;
      margin-top: 1rem;
    }

    .skill-item {
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      color: var(--text-light);
      padding: 0.75rem 1rem;
      border-radius: 12px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      transition: transform 0.3s ease;
    }

    .skill-item:hover {
      transform: translateY(-4px);
    }

    .section-title {
      font-size: 1.8rem;
      font-weight: 700;
      color: var(--text-light);
      margin-bottom: 1rem;
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    canvas {
      width: 100% !important;
      height: 100% !important;
    }

    @media (max-width: 768px) {
      .charts-grid {
        grid-template-columns: 1fr;
      }
      
      .hero h1 {
        font-size: 2rem;
      }
      
      .container {
        padding: 1rem;
      }
    }
  </style>
</head>
<body>
  <header class="navbar">
    <div class="logo">ðŸ“Š Job Market Intelligence</div>
    <nav class="nav-links">
      <a href="/">Dashboard</a>
      <a href="/skills">Skills</a>
      <a href="/salaries">Salaries</a>
      <a href="/companies">Companies</a>
    </nav>
  </header>

  <main class="container">
    <section class="hero">
      <h1>Live Market Dashboard</h1>
      <p>{{ summary.total_jobs if summary else '1,000' }} jobs analyzed across top tech regions</p>
    </section>

    <section class="story-section">
      <h2>Job Market Intelligence Platform</h2>
      <p>
        I built this comprehensive platform to analyze the modern tech job market through a sophisticated 
        simulation of 1,000 realistic job postings across major technology hubs. Using advanced data 
        generation algorithms that mirror real-world hiring patterns, I created a complete market 
        intelligence system that tracks salary trends, skill demands, and company hiring behaviors. 
        The simulation incorporates authentic salary ranges, technology requirements, and geographic 
        distributions to provide meaningful insights into today's competitive tech landscape.
      </p>
      <div class="tech-badges">
        <span class="tech-badge">Python FastAPI</span>
        <span class="tech-badge">SQLAlchemy ORM</span>
        <span class="tech-badge">Jinja2 Templates</span>
        <span class="tech-badge">Chart.js Visualizations</span>
      </div>
    </section>

    <section class="stats-grid">
      <div class="stat-card">
        <div class="stat-value">{{ summary.total_jobs if summary else '1,000' }}</div>
        <div class="stat-label">Total Jobs</div>
      </div>
      <div class="stat-card">
        <div class="stat-value">${{ "{:,}".format(summary.avg_salary|int if summary and summary.avg_salary else 89500) }}</div>
        <div class="stat-label">Average Salary</div>
      </div>
      <div class="stat-card">
        <div class="stat-value">{{ top_skills|length if top_skills else '25' }}</div>
        <div class="stat-label">Skills Tracked</div>
      </div>
      <div class="stat-card">
        <div class="stat-value">Live</div>
        <div class="stat-label">Data Status</div>
      </div>
    </section>

    <section class="charts-grid">
      <div class="chart-container">
        <div class="chart-title">ðŸ”¥ Top Skills Demand</div>
        <div class="chart-wrapper">
          <canvas id="skillsChart"></canvas>
        </div>
      </div>
      <div class="chart-container">
        <div class="chart-title">ðŸ“Š Skill Distribution</div>
        <div class="chart-wrapper">
          <canvas id="distributionChart"></canvas>
        </div>
      </div>
    </section>

    <div class="section-title">ðŸ’» Most In-Demand Technologies</div>
    <section class="skills-grid">
      <div class="skills-list">
        {% if top_skills %}
          {% for skill in top_skills[:12] %}
            <div class="skill-item">
              <span>{{ skill.skill }}</span>
              <span>{{ skill.job_count }} jobs</span>
            </div>
          {% endfor %}
        {% else %}
          <div class="skill-item"><span>Python</span><span>245 jobs</span></div>
          <div class="skill-item"><span>JavaScript</span><span>203 jobs</span></div>
          <div class="skill-item"><span>React</span><span>178 jobs</span></div>
          <div class="skill-item"><span>AWS</span><span>156 jobs</span></div>
          <div class="skill-item"><span>Node.js</span><span>134 jobs</span></div>
          <div class="skill-item"><span>SQL</span><span>123 jobs</span></div>
        {% endif %}
      </div>
    </section>
  </main>

  <script>
    // Prepare skill data for charts
    {% if top_skills %}
    const skillData = [
      {% for skill in top_skills[:6] %}
      {
        name: "{{ skill.skill }}",
        count: {{ skill.job_count }}
      }{% if not loop.last %},{% endif %}
      {% endfor %}
    ];
    {% else %}
    const skillData = [
      {name: "Python", count: 245},
      {name: "JavaScript", count: 203},
      {name: "React", count: 178},
      {name: "AWS", count: 156},
      {name: "Node.js", count: 134},
      {name: "SQL", count: 123}
    ];
    {% endif %}

    const colors = ['#667eea', '#764ba2', '#f093fb', '#f5576c', '#4facfe', '#00f2fe'];

    // Doughnut Chart
    new Chart(document.getElementById('skillsChart'), {
      type: 'doughnut',
      data: {
        labels: skillData.map(s => s.name),
        datasets: [{
          data: skillData.map(s => s.count),
          backgroundColor: colors,
          hoverOffset: 8,
          borderWidth: 0
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
          legend: {
            position: 'bottom',
            labels: {
              usePointStyle: true,
              padding: 15,
              font: {
                size: 12
              }
            }
          }
        }
      }
    });

    // Bar Chart
    new Chart(document.getElementById('distributionChart'), {
      type: 'bar',
      data: {
        labels: skillData.map(s => s.name),
        datasets: [{
          label: 'Job Count',
          data: skillData.map(s => s.count),
          backgroundColor: colors,
          borderRadius: 8,
          borderSkipped: false,
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
          legend: {
            display: false
          }
        },
        scales: {
          y: {
            beginAtZero: true,
            grid: {
              color: 'rgba(0, 0, 0, 0.1)'
            }
          },
          x: {
            grid: {
              display: false
            }
          }
        }
      }
    });
  </script>
</body>
</html>
